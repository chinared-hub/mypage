{"pageProps":{"post":{"filename":"programming/[Git]æ“ä½œå®è·µ.md","title":"Gitæ“ä½œå®è·µ","excerpt":"","date":"2020-05-28T18:00:00.000Z","updated":"2020-05-28T18:00:00.000Z","preText":"Git","preTextColor":"#FF6666","content":"<h1>Gitæ“ä½œå®è·µ</h1>\n<h2>é€Ÿè§ˆ</h2>\n<h3>ä»“åº“</h3>\n<pre><code class=\"language-shell\"># åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“\n$ git init\n\n# æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“\n$ git init [project-name]\n\n# ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²\n$ git clone [url]\n</code></pre>\n<h3>é…ç½®</h3>\n<pre><code class=\"language-shell\"># æ˜¾ç¤ºå½“å‰çš„Gité…ç½®\n$ git config --list\n\n# ç¼–è¾‘Gité…ç½®æ–‡ä»¶\n$ git config -e [--global]\n\n# è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯\n$ git config [--global] user.name \"[name]\"\n$ git config [--global] user.email \"[email address]\"\n</code></pre>\n<h3>å¢åŠ /åˆ é™¤æ–‡ä»¶</h3>\n<pre><code class=\"language-shell\"># æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº\n$ git add [file1] [file2] ...\n\n# æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•\n$ git add [dir]\n\n# æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº\n$ git add .\n\n# æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤\n# å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤\n$ git add -p\n\n# åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº\n$ git rm [file1] [file2] ...\n\n# åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº\n$ git rm --cached [file]\n\n# æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº\n$ git mv [file-original] [file-renamed]\n</code></pre>\n<h3>ä»£ç æäº¤</h3>\n<pre><code class=\"language-shell\"># æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº\n$ git commit -m [message]\n\n# æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº\n$ git commit [file1] [file2] ... -m [message]\n\n# æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº\n$ git commit -a\n\n# æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯\n$ git commit -v\n\n# ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤\n# å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯\n$ git commit --amend -m [message]\n\n# é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–\n$ git commit --amend [file1] [file2] ...\n</code></pre>\n<h3>åˆ†æ”¯</h3>\n<pre><code class=\"language-shell\"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯\n$ git branch\n\n# åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯\n$ git branch -r\n\n# åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯\n$ git branch -a\n\n# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯\n$ git branch [branch-name]\n\n# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯\n$ git checkout -b [branch]\n\n# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit\n$ git branch [branch] [commit]\n\n# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»\n$ git branch --track [branch] [remote-branch]\n\n# åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº\n$ git checkout [branch-name]\n\n# åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯\n$ git checkout -\n\n# å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´\n$ git branch --set-upstream [branch] [remote-branch]\n\n# åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯\n$ git merge [branch]\n\n# é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯\n$ git cherry-pick [commit]\n\n# åˆ é™¤åˆ†æ”¯\n$ git branch -d [branch-name]\n\n# åˆ é™¤è¿œç¨‹åˆ†æ”¯\n$ git push origin --delete [branch-name]\n$ git branch -dr [remote/branch]\n</code></pre>\n<h3>æ ‡ç­¾</h3>\n<pre><code class=\"language-shell\"># åˆ—å‡ºæ‰€æœ‰tag\n$ git tag\n\n# æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit\n$ git tag [tag]\n\n# æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit\n$ git tag [tag] [commit]\n\n# åˆ é™¤æœ¬åœ°tag\n$ git tag -d [tag]\n\n# åˆ é™¤è¿œç¨‹tag\n$ git push origin :refs/tags/[tagName]\n\n# æŸ¥çœ‹tagä¿¡æ¯\n$ git show [tag]\n\n# æäº¤æŒ‡å®štag\n$ git push [remote] [tag]\n\n# æäº¤æ‰€æœ‰tag\n$ git push [remote] --tags\n\n# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag\n$ git checkout -b [branch] [tag]\n</code></pre>\n<h3>æŸ¥çœ‹ä¿¡æ¯</h3>\n<pre><code class=\"language-shell\"># æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶\n$ git status\n\n# æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²\n$ git log\n\n# æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶\n$ git log --stat\n\n# æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯\n$ git log -S [keyword]\n\n# æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ\n$ git log [tag] HEAD --pretty=format:%s\n\n# æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶\"æäº¤è¯´æ˜\"å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶\n$ git log [tag] HEAD --grep feature\n\n# æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å\n$ git log --follow [file]\n$ git whatchanged [file]\n\n# æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff\n$ git log -p [file]\n\n# æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤\n$ git log -5 --pretty --oneline\n\n# æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº\n$ git shortlog -sn\n\n# æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡\n$ git blame [file]\n\n# æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚\n$ git diff\n\n# æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚\n$ git diff --cached [file]\n\n# æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚\n$ git diff HEAD\n\n# æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚\n$ git diff [first-branch]...[second-branch]\n\n# æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç \n$ git diff --shortstat \"@{0 day ago}\"\n\n# æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–\n$ git show [commit]\n\n# æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶\n$ git show --name-only [commit]\n\n# æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹\n$ git show [commit]:[filename]\n\n# æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤\n$ git reflog\n</code></pre>\n<h3>è¿œç¨‹åŒæ­¥</h3>\n<pre><code class=\"language-shell\"># ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨\n$ git fetch [remote]\n\n# æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“\n$ git remote -v\n\n# æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯\n$ git remote show [remote]\n\n# å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å\n$ git remote add [shortname] [url]\n\n# å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶\n$ git pull [remote] [branch]\n\n# ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“\n$ git push [remote] [branch]\n\n# å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª\n$ git push [remote] --force\n\n# æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“\n$ git push [remote] --all\n</code></pre>\n<h3>æ’¤é”€</h3>\n<pre><code class=\"language-shell\"># æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº\n$ git checkout [file]\n\n# æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº\n$ git checkout [commit] [file]\n\n# æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº\n$ git checkout .\n\n# é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜\n$ git reset [file]\n\n# é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´\n$ git reset --hard\n\n# é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜\n$ git reset [commit]\n\n# é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´\n$ git reset --hard [commit]\n\n# é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜\n$ git reset --keep [commit]\n\n# æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit\n# åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯\n$ git revert [commit]\n\næš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥\n$ git stash\n$ git stash pop\n</code></pre>\n<h3>å…¶ä»–</h3>\n<pre><code class=\"language-shell\"># ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…\n$ git archive\n</code></pre>\n<h2>è®¾ç½®Gitç”¨æˆ·å</h2>\n<p>åœ¨ Git ä¸­è®¾ç½®è‡ªå·±çš„ç”¨æˆ·åæ˜¯éå¸¸å¿…è¦çš„ä¸€ä¸ªæ­¥éª¤ï¼Œå› ä¸ºåœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œä¼šè®°å½•ä¸‹æäº¤è€…çš„ä¿¡æ¯ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°æŸæ—¶æŸåˆ»æ˜¯è°æ¨é€äº†ä»£ç ã€‚</p>\n<p><strong>ä¸ºä¸€ä¸ªä»“åº“è®¾ç½® Git ç”¨æˆ·å</strong></p>\n<ol>\n<li>\n<p>æ‰“å¼€ Git Bashã€‚</p>\n</li>\n<li>\n<p>å°†å½“å‰å·¥ä½œç›®å½•æ›´æ”¹ä¸ºæ‚¨æƒ³è¦åœ¨å…¶ä¸­é…ç½®ä¸ Git æäº¤å…³è”çš„åç§°çš„æœ¬åœ°ä»“åº“ã€‚</p>\n</li>\n<li>\n<p>è®¾ç½® Git ç”¨æˆ·åä»¥åŠè”ç³»æ–¹å¼ï¼š</p>\n<pre><code class=\"language-shell\">$ git config user.name \"Mona Lisa\"\n$ git config user.email \"email@example.com\"\n</code></pre>\n</li>\n<li>\n<p>ç¡®è®¤æ‚¨æ­£ç¡®è®¾ç½®äº† Git ç”¨æˆ·åä»¥åŠè”ç³»æ–¹å¼ï¼š</p>\n<pre><code class=\"language-shell\">$ git config user.name\n> Mona Lisa\n$ git config user.email\n> email@example.com\n</code></pre>\n</li>\n</ol>\n<p><strong>ä¸ºè®¡ç®—æœºä¸Šçš„æ¯ä¸ªä»“åº“è®¾ç½® Git ç”¨æˆ·å</strong></p>\n<ol>\n<li>\n<p>æ‰“å¼€ Git Bashã€‚</p>\n</li>\n<li>\n<p>è®¾ç½® Git ç”¨æˆ·åï¼š</p>\n<pre><code class=\"language-shell\">$ git config --global user.name \"Mona Lisa\"\n$ git config --global user.email \"email@example.com\"\n</code></pre>\n</li>\n<li>\n<p>ç¡®è®¤æ‚¨æ­£ç¡®è®¾ç½®äº† Git ç”¨æˆ·åï¼š</p>\n<pre><code class=\"language-shell\">$ git config --global user.name\n>Mona Lisa\n$ git config --global user.email\n> email@example.com\n</code></pre>\n</li>\n</ol>\n<h2>è·å–ä»£ç  (Fetchã€Pull)</h2>\n<p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè¿œç¨‹ Git åˆ†æ”¯ï¼Œä¾‹å¦‚ Github ä¸Šçš„ä¸€ä¸ª master åˆ†æ”¯ï¼Œé‚£ä¹ˆè¿œç¨‹åˆ†æ”¯å¯èƒ½æœ‰æœ¬åœ°åˆ†æ”¯æ²¡æœ‰çš„æäº¤ï¼ä¹Ÿè®¸æ˜¯å¦ä¸€ä¸ªåˆ†æ”¯åˆå¹¶äº†ï¼Œä¹Ÿè®¸æ˜¯ä½ çš„åŒäº‹æ¨é€äº†ä¸€ä¸ª BUG çš„ä¿®å¤ï¼Œç­‰ç­‰ã€‚</p>\n<p>å¦‚æœæƒ³è¦åŒæ­¥è¿™äº›æœ€æ–°çš„æäº¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ <code>git fetch</code>ï¼Œå¦ä¸€ç§æ˜¯ <code>git pull</code>ã€‚</p>\n<p><code>git fetch</code> ä¼šå°†è¿œç¨‹æ•°æ®ä¸‹è½½è‡³æœ¬åœ°ï¼Œä¸è¿‡ä¹Ÿä»…ä»…æ˜¯ä¸‹è½½è‡³æœ¬åœ°è€Œå·²ã€‚<br>\n<code>git pull</code> ä¼šå°†è¿œç¨‹æ•°æ®ä¸‹è½½è‡³æœ¬åœ°ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜å°†ä¸‹è½½çš„æ•°æ®ä¸æœ¬åœ°ä»£ç åˆå¹¶ã€‚</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-pull.gif?v=1\" alt=\"git-merge-dev.gif\"></p>\n<p>é€šå¸¸çš„ï¼Œå¼€å‘äººå‘˜ä¼šä½¿ç”¨ <code>git pull</code> æ¥è·å–è¿œç¨‹ Git ä»“åº“ä¸Šçš„æœ€æ–°æäº¤ï¼Œä»¥è¾¾åˆ°æ›´æ–°æœ¬åœ°ä»£ç çš„ç›®çš„ã€‚å…¶å®ï¼Œ<code>git pull</code> å‘½ä»¤è¡Œå°±ç›¸å½“äº <code>git fetch</code> + <code>git merge origin/master</code>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ›´æ–°ä»£ç ï¼Œä½¿ç”¨ <code>git pull</code> å°±å¥½äº†ã€‚</p>\n<h2>åˆå¹¶ä»£ç  (Merge)</h2>\n<p>åˆå¹¶ä»£ç åˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼šFast-forward (--ff)ã€No-fast-foward (--no-ff)ã€‚åœ¨å¤šåˆ†æ”¯çš„å¼€å‘ç¯å¢ƒä¸‹ï¼Œåˆå¹¶ä»£ç  (git merge) ä¹Ÿæ˜¯è¾ƒä¸ºå¸¸ç”¨çš„ä¸€ä¸ªå‘½ä»¤ã€‚</p>\n<p><strong>Fast-forward (--ff)</strong> </p>\n<p>å‡è®¾ master ä¸»å¹²è¦åˆå¹¶ dev åˆ†æ”¯ä¸Šçš„æ›´æ”¹ï¼Œè€Œ master ç›¸å¯¹äº dev æ¥è¯´æ²¡æœ‰ä»»ä½•å˜åŠ¨ï¼Œé‚£ä¹ˆ git ä¼šä½¿ç”¨ Fast-forward æ–¹å¼è¿›è¡Œä¸€æ¬¡å¿«é€Ÿåˆå¹¶ã€‚è¯¥æ–¹å¼æ˜¯ git çš„â€œæ‡’â€æ“ä½œï¼Œè¿™æ ·ä¸éœ€è¦ master ä¸»å¹²ç”Ÿæˆä»»ä½•æäº¤è®°å½•ï¼Œä»…éœ€å¤ç”¨ dev åˆ†æ”¯çš„æäº¤è®°å½•å³å¯ã€‚</p>\n<pre><code class=\"language-shell\">$ git merge dev\nUpdating 7173edd..7d959a2\nFast-forward\n README.md | 1 +\n 1 file changed, 1 insertion(+)\n$ git push\n</code></pre>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-merge-dev.gif?v=2\" alt=\"git-merge-dev.gif\"></p>\n<p><strong>No-fast-foward (--no-ff)</strong> </p>\n<p>å‡è®¾ master ã€dev ä¸¤ä¸ªåˆ†æ”¯çš„å¼€å‘æ˜¯å¹¶è¡Œå¼€å±•çš„ï¼Œè¯¥æƒ…å†µä¸‹è¿›è¡Œä»£ç çš„åˆå¹¶ï¼Œgit å°±ä¼šä¸»åŠ¨æç¤ºå¼€å‘äººå‘˜è¿›è¡Œå¿…è¦çš„ <strong>commit</strong> æ“ä½œï¼Œæ­¤æ—¶çš„ <code>git merge dev</code> æ“ä½œå°±ç›¸å½“äº <code>git merge --no-ff dev</code>ã€‚è¯¥æƒ…å†µä¸‹çš„æäº¤è®°å½•ä¼šä¸ä¸Šè¾¹çš„ <strong>Fast-forward (--ff)</strong> æœ‰å·®å¼‚ï¼Œ å› ä¸ºåˆå¹¶ä¹‹åï¼Œä¼šåœ¨ master ä¸ dev é¡¶ç«¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤è®°å½•ã€‚</p>\n<pre><code class=\"language-sh\">$ git merge dev\n</code></pre>\n<pre><code class=\"language-sh\">Merge branch 'dev'\n# Please enter a commit message to explain why this merge is necessary,\n# especially if it merges an updated upstream into a topic branch.\n#\n# Lines starting with '#' will be ignored, and an empty message aborts\n# the commit.\n\n</code></pre>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-merge-no-ff-dev.gif?v=2\" alt=\"git-merge-no-ff-dev.gif\"></p>\n<h2>åˆå¹¶å†²çª (Merge Conflicts)</h2>\n<p>åˆå¹¶ä»£ç å‘ç”Ÿå†²çªæ˜¯å¾ˆå¸¸è§çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼Œåœ¨æŸä¸¤ä¸ªåˆ†æ”¯ä¸­ï¼Œå¯¹ç›¸åŒæ–‡ä»¶çš„ç›¸åŒä½ç½®åšäº†ä¸åŒçš„ä¿®æ”¹ï¼Œè¯¥æƒ…å†µä¸‹åˆå¹¶ä»£ç ï¼Œgit æ˜¯æ— æ³•è‡ªä¸»å†³å®šä»£ç çš„åˆå¹¶çš„ï¼Œå› ä¸ºæ— æ³•ç¡®å®šå“ªä¸ªåˆ†æ”¯çš„æ›´æ”¹æ‰æ˜¯æœ€æœ‰æ•ˆçš„ã€‚</p>\n<p>å‡è®¾æœ‰Aã€Bç¨‹åºå‘˜ä»¥åŠä¸€ä¸ª README.md æ–‡ä»¶<br>\nA ç¨‹åºå‘˜ï¼šç¼–è¾‘ master ä¸»å¹² README.md é‡Œçš„ç¬¬ä¸€è¡Œæ–‡å­—ï¼Œæ›´æ”¹ä¸ºï¼šHeyï¼<br>\nB ç¨‹åºå‘˜ï¼šç¼–è¾‘ dev åˆ†æ”¯ README.md é‡Œçš„ç¬¬ä¸€è¡Œæ–‡å­—ï¼Œæ›´æ”¹ä¸ºï¼šHelloï¼<br>\næ­¤æ—¶åˆå¹¶ä»£ç å°†å‘ç”Ÿå†²çªï¼š</p>\n<pre><code class=\"language-shell\">$ git merge dev\nAuto-merging README.md\nCONFLICT (content): Merge conflict in README.md\nAutomatic merge failed; fix conflicts and then commit the result.\n</code></pre>\n<p>è¯¥æƒ…å†µä¸‹éœ€è¦äººä¸ºçš„è§£å†³å†²çªï¼Œé¦–å…ˆç¼–è¾‘ README.md æ–‡ä»¶ï¼š</p>\n<pre><code class=\"language-shell\">vi README.md\n</code></pre>\n<p>å¯ä»¥å‘ç° README.md çš„å†…å®¹ä¼šæœ‰æ‰€æ›´æ”¹ï¼Œå› ä¸º git è‡ªåŠ¨å¡«å……äº†ä¸¤ä¸ªåˆ†æ”¯çš„ä¸åŒä¹‹å¤„ï¼Œä»¥æ–¹ä¾¿å¼€å‘äººå‘˜è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"language-shell\">&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;&#x3C;&#x3C; HEAD\nHeyï¼\n=======\nHelloï¼\n>>>>>>> dev\n</code></pre>\n<p>æ­¤æ—¶åªéœ€å†³å®šéœ€è¦ä¿ç•™çš„å†…å®¹å³å¯ï¼Œå¦‚ä¿ç•™ <code>Heyï¼</code>è€Œé <code>Helloï¼</code>ï¼š</p>\n<pre><code class=\"language-shell\">Heyï¼\n</code></pre>\n<p>æœ€åé‡æ–°æäº¤ä»£ç å³å¯ï¼Œæœ¬æ¬¡åˆå¹¶çš„å†²çªå°±è§£å†³å•¦ã€‚</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-merge-conflicts.gif?v=3\" alt=\"git-merge-comflicts.gif\"></p>\n<h2>å˜åŸº (Rebase)</h2>\n<p>åœ¨ä¹‹å‰çš„æ“ä½œä¸­å¯ä»¥äº†è§£åˆ°ï¼Œ<code>git merge</code> å¯å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯åº”ç”¨äºå¦ä¸€ä¸ªåˆ†æ”¯ã€‚è€Œ git è¿˜æœ‰ä¸€ç§ç±»ä¼¼çš„æ“ä½œ <code>git rebase</code>ï¼Œä¹Ÿå¯å®ç°å°†æ›´æ”¹ä»ä¸€ä¸ªåˆ†æ”¯æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-rebase.gif?v=3\" alt=\"git-rebase.gif\"></p>\n<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ <code>git rebase</code> ä¸åŒäº <code>git merge</code> ä¹‹å¤„ï¼Œåœ¨äº rebase ä¼šé‡å†™æäº¤æ ‘çš„ç»“æ„ï¼Œä»¥ä½¿ master åˆ†æ”¯æˆä¸ºå½“å‰åˆ†æ”¯çš„ä¸€éƒ¨åˆ†ã€‚</p>\n<p>ä¸ªäººç†è§£ï¼šä½¿ç”¨ rebase ï¼Œå¯ä»¥ä½¿å¾—å½“å‰å¼€å‘çš„åˆ†æ”¯æ˜¯åŸºäº master æˆ–è€…å…¶ä»–é‡è¦åˆ†æ”¯è¿›è¡Œå»¶ä¼¸ï¼Œè€Œå¦‚æœå½“å‰åˆ†æ”¯çš„ä»£ç è¦è¢« master æˆ–å…¶å®ƒåˆ†æ”¯åˆå¹¶æ—¶ï¼Œå¯ä»¥é¡ºåˆ©çš„å®Œæˆä¸€æ¬¡ (Fast-forward) åˆå¹¶ï¼</p>\n<h2>æ¢å¤ (Resetã€Revert)</h2>\n<p>å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯¹ä»£ç åšäº†ä¸ç†æƒ³çš„æ›´æ”¹ï¼Œæ¯”å¦‚å­˜åœ¨ BUGã€åŠŸèƒ½è°ƒæ•´ç­‰ï¼Œé‚£ä¹ˆåœ¨æ¨é€ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å¯¹è¿™äº›æ–‡ä»¶å†…å®¹æˆ–è€…çŠ¶æ€è¿›è¡Œå›æ»šã€æ¢å¤ã€é‡æ–°ç¼–è¾‘ç­‰ã€‚</p>\n<p><strong>Soft reset</strong></p>\n<p>å‡è®¾åœ¨æœ¬åœ°çš„ dev åˆ†æ”¯åˆ†åˆ«æäº¤äº† style.css å’Œ index.js æ–‡ä»¶çš„æ›´æ”¹ï¼Œç”Ÿæˆäº†ä¸¤æ¡è®°å½• <strong>change background-color</strong>ã€<strong>fixed index logic</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-reset-test.png\" alt=\"git-reset-test\"></p>\n<p>æŸ¥çœ‹å½“å‰ git çš„çŠ¶æ€ï¼š</p>\n<pre><code class=\"language-shell\">$ git status\nOn branch dev\nYour branch is ahead of 'origin/dev' by 2 commits.\n  (use \"git push\" to publish your local commits)\n</code></pre>\n<p>å¦‚æœæƒ³è¦æ’¤é”€è¿™ä¸¤æ¬¡æäº¤è®°å½•ï¼Œä½†æ˜¯éœ€è¦ä¿ç•™å½“å‰æ›´æ”¹çš„å†…å®¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æ‰§è¡Œ <code>git reset --soft HEAD~2</code> æ¥å®ç° (<em>HEAD æŒ‡é’ˆåé€€ä¸¤æ­¥</em> )ã€‚æ­¤æ—¶è§‚å¯Ÿ git çŠ¶æ€ï¼Œä¼šæ˜¾ç¤º index.jsã€style.css éƒ½å¤„äº <strong>modified</strong> çŠ¶æ€ï¼Œç­‰å¾…ç€æ–°çš„ <strong>commit</strong> (<em>Changes to be committed</em>)ã€‚</p>\n<pre><code class=\"language-shell\">$ git status\nOn branch dev\nYour branch is up to date with 'origin/dev'.\n\nChanges to be committed:\n  (use \"git reset HEAD &#x3C;file>...\" to unstage)\n\n        modified:   index.js\n        modified:   style.css\n</code></pre>\n<p>ç›¸åº”çš„ï¼Œgit çš„å†å²è®°å½•ä¹Ÿæœ‰æ‰€æ”¹å˜ï¼š</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-reset-test-2.png\" alt=\"git-reset-test-2\"></p>\n<p><strong>Mixed reset</strong></p>\n<p>ä¸ <code>reset --soft</code> æ•ˆæœä¸€è‡´ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ <code>reset --mixed</code> ä¼šå°†æœ¬åœ°æš‚å­˜åŒºçš„ç¼“å­˜åˆ æ‰ã€‚</p>\n<pre><code class=\"language-shell\">$ git reset --mixed HEAD~2\nUnstaged changes after reset:\nM       index.js\nM       style.css\n</code></pre>\n<p>æ‰€ä»¥å¦‚æœè¦é‡æ–° <code>commit</code> æ–‡ä»¶ï¼Œéœ€è¦å…ˆå¯¹æ–‡ä»¶è¿›è¡Œ <code>git add</code> æ“ä½œã€‚</p>\n<p><strong>Hard reset</strong></p>\n<p><code>reset --hard</code> å‘½ä»¤ç›¸å¯¹æ›´åŠ çš„ä¸¥æ ¼ï¼Œä½¿ç”¨ <strong>hard</strong> ä¸ä»…ä¼šåˆ é™¤æœ¬åœ°æš‚å­˜åŒºçš„ç¼“å­˜ï¼Œè¿˜ä¼šå°†å®é™…ç¼–è¾‘çš„æ–‡ä»¶ä¹Ÿä¸€å¹¶æ¢å¤åŸæ ·ã€‚</p>\n<pre><code class=\"language-shell\">$ git reset --hard HEAD~2\nHEAD is now at 431f5f6 fixed something\n</code></pre>\n<pre><code class=\"language-shell\">$ git status\nOn branch dev\nYour branch is up to date with 'origin/dev'.\n\nnothing to commit, working tree clean\n</code></pre>\n<p>è§‚å¯Ÿæ–‡ä»¶å¯ä»¥çœ‹åˆ°ï¼Œæ–‡ä»¶æ¢å¤æˆäº†æ›´æ”¹å‰çš„æ¨¡æ ·ï¼Œå°±å¥½åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿè¿‡ã€‚</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-reset-test-3.png\" alt=\"git-reset-test-3\"></p>\n<p><strong>revert</strong></p>\n<p>git æä¾›çš„å¦ä¸€ä¸ªå‘½ä»¤ <strong>revert</strong> ä¹Ÿå¯ä»¥å®ç°ä»£ç çš„å›é€€ã€‚ä¸ <strong>reset</strong> å‘½ä»¤ä¸ä¸€æ ·ï¼Œrevert ä¸ä¼šåˆ é™¤æš‚å­˜åŒºæ•°æ®ã€ä¹Ÿä¸ä¼šå›é€€ <strong>HEAD</strong> æŒ‡é’ˆï¼Œç›¸åï¼Œrevert ä¼šè¦æ±‚æ–°å¢å¯¹åº”çš„ commit ï¼Œæ¥åŠ ä»¥è¯´æ˜ä¸ºä»€ä¹ˆè¦å¯¹æ–‡ä»¶è¿›è¡Œæ¢å¤æˆ–è€…å›é€€æ“ä½œã€‚</p>\n<p>æ¯”å¦‚éœ€è¦å›æ»šä»¥ä¸Š index.js ã€style.css ä¸¤ä¸ªæ–‡ä»¶çš„ä»£ç å¹¶ä¸”è®°å½•ä¸‹åŸå› ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>git revert HEAD~2..</code> æ¥å®ç°ã€‚</p>\n<p>æŸ¥çœ‹ git çš„å†å²è®°å½•ï¼š</p>\n<p><img src=\"https://resource.1024kb.top/image/code-sample/git-reset-test-4.png\" alt=\"git-reset-test-3\"></p>\n<pre><code class=\"language-shell\">git revert HEAD #æ’¤é”€æœ€æ–°æäº¤\ngit revert HEAD^ #æ’¤é”€å€’æ•°ç¬¬2æ¬¡æäº¤\ngit revert HEAD~2 #æ’¤é”€å€’æ•°ç¬¬3æ¬¡æäº¤\ngit revert HEAD~2.. #æ’¤é”€æœ€æ–°ä¸¤æ¬¡æäº¤\ngit revert commit-id #æ’¤é”€æŒ‡å®šçš„ commit-id\n</code></pre>\n<h1>å‚è€ƒèµ„æ–™</h1>\n<ul>\n<li>GitHub, åœ¨ Git ä¸­è®¾ç½®ç”¨æˆ·å, <em>GitHub help</em>. <a href=\"https://help.github.com/cn/github/using-git/setting-your-username-in-git\">ğŸ“„</a></li>\n<li>é˜®ä¸€å³°, å¸¸ç”¨ Git å‘½ä»¤æ¸…å•, <em>é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</em>, 2015. <a href=\"http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html\">ğŸ“„</a></li>\n<li>Rob Di Marco, Peter Mortensen, â€œWhen do you use Git rebase instead of Git merge?â€, <em>Stack Overflow</em>, 2019. <a href=\"https://stackoverflow.com/a/804156\">ğŸ“„</a></li>\n<li>Lydia Hallie, ğŸŒ³ğŸš€ CS Visualized: Useful Git Commands, <em>DEV</em>, 2020. <a href=\"https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1\">ğŸ“„</a></li>\n<li>GitHowTo. <a href=\"https://githowto.com\">ğŸ“„</a></li>\n</ul>\n"}},"__N_SSG":true}